---
sidebar_position: 1
---

# PHP 火车头

## 重要说明

目前

1. 只适用于 `帝国 CMS`。
2. 没有 Web UI 界面，就是单纯写配置在 PHP 文件中。

> 后续会进行尝试 Web UI 界面，以及其他功能。

## 为什么写这个

- 因笔者工作要求，需要把火车头采集器改为 PHP 执行，后面代码写多了就封装了下，于是就打算写好文档。
- 采集 N 个网站，原本可以写 N 个 PHP 文件，但本着 DRY（不要重复你自己），还是多花点时间搞解耦（一个脚本文件，多个配置文件）吧！
- 「PHP 火车头」的适用人群几乎为 0，但是由于公司有 150 个垃圾站，长久的东西，当作自己写的笔记，尝试下「开源」的步骤，除了这个文档，后续还可以写写扩展，发布扩展。

## 需求

PHP 8.0 以上。

## 功能

1. 使用 Xpath 采集站点
2. 数据加工
3. 发布内容
   1. 文字：发送采集到的数据到 `帝国 CMS` 的免登陆发布地址。
   2. 图片：
      1. 把本程序「PHP 火车头」放在和目标站同一服务器中，它会下载图片到 `帝国 CMS` 目录下。
      2. 也支持远程发布，需要填写 FTP 地址。

## 快速开始

```shell
git clone https://github.com/likunyan/spider-api
mkdir cache # PHP 火车头缓存文件夹
chmod 777 cache
```

## 基础配置

需要采集的站点，放在 configs/sites/ 下，名字自取，但是后续执行命令的时候，需要根据这个文件名来执行。 假如需要采集 example.com，那么可以取名为 example.com.php，然后执行 `php artisan example.com`

### 配置文件范例

```php
<?php

return [
    'task' => [
        [
            'name' => '文章',
            'url' => 'http://www.example.com',
        ],
    ],
];
```
